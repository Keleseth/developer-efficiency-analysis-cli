# CLI-утилита для анализа эффективности разработчиков

![Python](https://img.shields.io/badge/python-3776AB?style=for-the-badge&logo=python&logoColor=white)
![CSV](https://img.shields.io/badge/CSV-2E8B57?style=for-the-badge&logo=files&logoColor=white)
![tabulate](https://img.shields.io/badge/tabulate-1E90FF?style=for-the-badge)
![pytest](https://img.shields.io/badge/pytest-0A9EDC?style=for-the-badge&logo=pytest&logoColor=white)

---

## Описание проекта

Утилита считывает один или несколько CSV-файлов с данными о разработчиках и формирует сортированный отчет со средней эффективностью по каждой должности

Отчет содержит:
- Порядковый номер должности в отсортированном по эффективности отчете
- Наименование должности
- Средний уровень эффективности разработчиков должности

## Установка
1. клонировать репозиторий и перейти в папку проекта
```bash
git clone https://github.com/Keleseth/developer-efficiency-analysis-cli
cd developer-efficiency-analysis-cli
```
2. Создать и активировать виртуальное окружение, установить зависимости
```bash
python -m venv venv
# Windows
source venv/Scripts/activate
# Linux / macOS
source venv/bin/activate
pip install -r requirements_dev.txt  # Версия с тестами
pip install -r requirements.txt
```

## Пример использования
1. Воспользоваться тестовыми csv файлами в папке examples `employees1.csv`, `employees2.csv` или создать и разместить свои.
2. Выполнить команду
```bash
python -m src.main --report performance --files examples/employees1.csv examples/employees2.csv
```
В терминале отобразится запрошенный отчет.

## Архитектурные решения
Проект построен по принципу разделения ответственности между компонентами:
- ApplicationService - оркестратор, управляющий последовательностью шагов: парсинг аргументов -> чтение данных из csv -> выбор подходящего генератора отчета -> генерация отчета -> вывод
- CommandParser - компонент, отвечающий только за обработку CLI-параметров
- CsvReader - чтение и нормализация входных данных из CSV
- ReportRegistry - реестр доступных типов отчетов. Позволяет регистрировать новые типы отчетов не внося изменений в существующий код
- PerformanceReport - генератор отчетов о средней эффективности разработчиков по должностям. Зарегистрирован в ReportRegistry. Генерация отчета реализована с помощью генератора, что позволяет обрабатывать входные данные больших размером.
- ConsoleRenderer - компонент отображения данных в терминал с помощью tabulate

### Модели данных:
Для нормализации данных и передачи между компонентнами используются `dataclass` модели:
- `CliOptions` - хранилище распарсеных параметров введенной команды (`--report`, `--files`)
- `DeveloperRecord` - представление разработчиков из csv файла.
- `ReportData` - результат работы генератора отчета. Содержит название отчета (если предоставлен), заголовки колонок и список строк, готовых к выводу.

## Примечание: 
Все компоненты являются реализацией протоколов, что обеспечивает единый стиль и облегчает замену или расширение функционала.
Согласно требованиям, масштабирование предполагает только добавление типов отчетов, поэтому фабрика создана только для генераторов отчетов (ReportProtocol). В случае необходимости, проект легко расширяется фабриками для остальных компонентов для мягкого замещения зависимостей.

### Добавление нового отчета
1. Создать класс, реализующий ReportProtocol, и определить в нём метод generate(), который возвращает ReportData (см. реализацию src.reports.performance_report.PerformanceReport)
2. Зарегистрировать новый отчет в реестре отчетов `src/reports/registry.py`:
```python
from src.reports.new_report import NewReport

report_registry.register(
    name='new_report',  # Название отчета, получаемого из командной строки  
    report_handler=NewReport,  # Реализация протокола отчета
)
```
3. После этого можно запускать утилиту с новым типом отчета:
```bash
python -m src.main --report new_report --files examples/employees1.csv examples/employees2.csv
```

В планах:
1. Вынести создание компонентов в фабрики для удобной замены и тестирования.
2. Добавить дополнительные CLI-опции, например:
   - `--save` - вывод отчета не только в консоль, но и сохранение в файл
   - `--top` - отображение только n наиболее эффективных должностей
   - `--asc` - реверс сортировки(по возрастанию);
3. Расширить набор поддерживаемых форматов входных и выходных данных.
---

Проект разработан Келесидисом Александром. GitHub: [Keleseth](https://github.com/Keleseth)
